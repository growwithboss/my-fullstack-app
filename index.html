<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BOSSAI Canvas</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #4285f4; --sidebar-bg: #1a1c1e; --canvas-bg: #ffffff; --text: #1f1f1f; }
        * { box-sizing: border-box; font-family: 'Plus Jakarta Sans', sans-serif; }
        body { margin: 0; display: flex; height: 100vh; background: #f0f4f9; color: var(--text); }
        
        /* Sidebar Styling */
        .sidebar { width: 280px; background: var(--sidebar-bg); color: white; display: flex; flex-direction: column; padding: 24px; }
        .logo { font-size: 22px; font-weight: 600; margin-bottom: 40px; display: flex; align-items: center; gap: 10px; }
        .nav-group { display: flex; flex-direction: column; gap: 8px; flex-grow: 1; }
        .nav-item { padding: 12px 16px; border-radius: 12px; cursor: pointer; transition: 0.2s; color: #c4c7c5; border: 1px solid transparent; }
        .nav-item:hover { background: #2d2f31; color: white; }
        .nav-item.active { background: #333639; border-color: var(--primary); color: white; }

        /* Canvas Workspace */
        .workspace { flex: 1; display: flex; flex-direction: column; padding: 40px; max-width: 1200px; margin: 0 auto; width: 100%; }
        .header-area { margin-bottom: 24px; }
        .header-area h1 { margin: 0; font-size: 28px; }
        
        .canvas-card { background: var(--canvas-bg); border-radius: 24px; flex-grow: 1; box-shadow: 0 4px 24px rgba(0,0,0,0.04); display: flex; flex-direction: column; overflow: hidden; border: 1px solid #e3e3e3; }
        
        textarea { width: 100%; border: none; padding: 24px; font-size: 16px; resize: none; outline: none; background: #f8fafd; height: 150px; border-bottom: 1px solid #e3e3e3; }
        
        .action-bar { padding: 16px 24px; display: flex; justify-content: flex-end; background: white; }
        .generate-btn { background: var(--primary); color: white; border: none; padding: 12px 28px; border-radius: 100px; font-weight: 600; cursor: pointer; transition: 0.2s; }
        .generate-btn:hover { filter: brightness(1.1); box-shadow: 0 4px 12px rgba(66,133,244,0.3); }

        .result-area { flex-grow: 1; padding: 24px; overflow-y: auto; line-height: 1.6; color: #444746; white-space: pre-wrap; font-size: 15px; }
        .result-area code { background: #f1f3f4; padding: 2px 6px; border-radius: 4px; font-family: monospace; }
    </style>
</head>
<body>
    <div class="sidebar">
        <div class="logo"><span>‚ú®</span> OfficeAI Canvas</div>
        <div class="nav-group">
            <div class="nav-item active" onclick="switchMode('email', this)">üìù Email Refiner</div>
            <div class="nav-item" onclick="switchMode('code', this)">üíª Code Assistant</div>
            <div class="nav-item" onclick="switchMode('excel', this)">üìä Excel Formula</div>
        </div>
    </div>

    <div class="workspace">
        <div class="header-area">
            <h1 id="modeTitle">Email Refiner</h1>
        </div>

        <div class="canvas-card">
            <textarea id="userInput" placeholder="Type your request here..."></textarea>
            <div class="action-bar">
                <button class="generate-btn" id="genBtn" onclick="generateAI()">Generate Content</button>
            </div>
            <div class="result-area" id="resultArea">
                Your AI-powered result will appear here...
            </div>
        </div>
    </div>

    <script>
        let currentMode = 'email';

        function switchMode(mode, el) {
            currentMode = mode;
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            el.classList.add('active');
            document.getElementById('modeTitle').innerText = el.innerText;
            document.getElementById('userInput').placeholder = `Ask for ${el.innerText.toLowerCase()}...`;
            document.getElementById('resultArea').innerText = "Canvas cleared.";
        }

        async function generateAI() {
            const prompt = document.getElementById('userInput').value;
            const resArea = document.getElementById('resultArea');
            const btn = document.getElementById('genBtn');
            
            if(!prompt) return alert("Please type something first!");
            
            resArea.innerHTML = "<i>‚ú® BOSSAI is working on your request...</i>";
            btn.disabled = true;

            try {
                const response = await fetch('https://my-fullstack-app-gvce.onrender.com/api/ai', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ prompt: prompt, type: currentMode })
                });
                const data = await response.json();
                resArea.innerText = data.result;
            } catch (err) {
                resArea.innerText = "Error: Backend is sleeping or connection failed.";
            } finally {
                btn.disabled = false;
            }
        }
    </script>
</body>
</html>
